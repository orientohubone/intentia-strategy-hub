//{"input":"(exemplo) Canal: meta, KPI: ROAS 1.8, Nicho: b2b SaaS. Situação: CAC alto e pacing 120%.","targets":{"score":68,"alertas":["Pacing acima do planejado","ROAS abaixo do benchmark"],"sugestoes":["Reduzir orçamento em campanhas de baixo ROAS","Testar criativos com CPA alvo"]},"metadata":{"canal":"meta","nicho":"b2b saas","kpis":{"roas":1.8,"cpa":180,"pacing":1.2},"fonte":"interno"}}
//{"input":"(exemplo) Canal: google, KPI: ROAS 3.2, Nicho: ecommerce. Situação: budget subalocado (pacing 60%).","targets":{"score":82,"alertas":["Subalocação de budget"],"sugestoes":["Realocar orçamento de campanhas com ROAS < 1.5","Aumentar bids nas keywords com ROAS > 3"]},"metadata":{"canal":"google","nicho":"ecommerce","kpis":{"roas":3.2,"cpa":90,"pacing":0.6},"fonte":"benchmark"}}

import json

# Definição das 50 variações de Q&A (Estrutura Vertex AI / Gemini)
data = [
    # Pilar 1: Métricas e Benchmarks
    ("Qual o benchmark de churn mensal para ERP PME no Brasil?", "O churn mensal (Logos) saudável gira entre 2,5% e 4,5%. Taxas acima disso indicam problemas de onboarding ou alta mortalidade de PMEs."),
    ("Qual a meta ideal de LTV/CAC para este setor?", "O ideal é acima de 3.0x, garantindo que o valor do cliente supere o custo de aquisição em três vezes."),
    ("Qual o payback médio do CAC em ERPs PME?", "Entre 8 a 14 meses, variando conforme a eficiência dos canais de Inside Sales ou PLG."),
    ("O que é um NRR saudável para ERP PME?", "Acima de 100%, impulsionado por expansão (up-sell) e receitas de Embedded Finance."),
    ("Como o ARPU é composto em ERPs modernos?", "Assinatura do software (SaaS) + Take rate sobre serviços financeiros (boletos, antecipação)."),
    ("Qual a margem bruta esperada para SaaS ERP?", "Entre 70% e 85%, dependendo da eficiência do suporte e custos de infraestrutura."),
    ("Qual o impacto do CAC em canais de performance?", "O CAC tende a subir; por isso, parcerias com contadores são essenciais para reduzir o custo médio de aquisição."),
    ("O que define a 'Regra dos 40' no contexto de ERP?", "A soma da taxa de crescimento anual e a margem EBITDA deve ser igual ou superior a 40%."),
    ("Qual a taxa de conversão média de Trial para Pago?", "Em modelos PLG eficientes, varia entre 15% e 25%."),
    ("Como medir o Stickiness de um ERP?", "Através do DAU/MAU e da frequência de uso do módulo de conciliação bancária."),
    ("Qual o custo médio de suporte (COGS) por cliente?", "Geralmente representa de 15% a 20% da receita bruta da conta."),
    ("Qual a importância do CAC Payback para o fluxo de caixa?", "Determina quão rápido o capital investido em marketing retorna para reinvestimento no negócio."),
    
    # Pilar 2: Contexto Fiscal e Tributário
    ("Por que a integração com prefeituras é um diferencial?", "Devido à fragmentação de mais de 5.000 padrões de NFS-e; sistemas que automatizam isso reduzem drasticamente o churn."),
    ("Qual o impacto da Reforma Tributária (IVA Dual) nos ERPs?", "Exige a reformulação do motor de cálculo para IBS e CBS e integração obrigatória de Split Payment."),
    ("O que é Split Payment no contexto de ERP?", "A separação automática do imposto no momento do pagamento da fatura pelo cliente final."),
    ("Como o Simples Nacional afeta o desenvolvimento do software?", "Exige automação do cálculo do DAS e controle rigoroso de faixas de faturamento e anexos."),
    ("O que é o Fiscal Lock-in?", "A barreira de saída criada pela complexidade de migrar dados fiscais e integrações municipais para outro sistema."),
    ("Como o SPED e REINF impactam o churn?", "Erros nestes arquivos geram multas pesadas; a confiabilidade fiscal é o maior motivo de retenção."),
    ("O que muda na emissão de NF-e com a reforma?", "A transição de impostos plurifásicos para um modelo de valor agregado simplificado com exigência de Split em tempo real."),
    ("Como tratar a Substituição Tributária (ST) no motor de cálculo?", "Exige tabelas atualizadas por estado (MVA), sendo um dos módulos mais complexos e valorizados no Brasil."),
    ("Qual a vantagem de ter o Contador no ecossistema do ERP?", "O contador valida a segurança fiscal do software, servindo como um canal de indicação de baixíssimo CAC."),
    ("ERPs para PMEs precisam suportar Lucro Real?", "Sim, para atender PMEs que crescem e saem do Simples Nacional, evitando o churn por 'outgrowth'."),
    ("Como o Open Finance ajuda o setor fiscal?", "Permite a conciliação automática, garantindo que o faturado condiz exatamente com o extrato bancário."),
    ("O que é o DIFAL e como o ERP deve gerir?", "É o diferencial de alíquota de ICMS em operações interestaduais, essencial para clientes que vendem online."),

    # Pilar 3: Embedded Finance
    ("Como o ERP monetiza além da mensalidade?", "Via taxas por boleto emitido, antecipação de recebíveis e serviços de conta digital (Banking as a Service)."),
    ("O que é o Take Rate financeiro?", "A porcentagem ou valor fixo que o ERP retém sobre cada transação financeira processada na plataforma."),
    ("Por que o Embedded Finance aumenta o LTV?", "Transforma o ERP no banco da empresa, tornando a troca de sistema um processo operacionalmente doloroso."),
    ("Qual o risco de crédito em ERPs que oferecem crédito?", "Inadimplência; no entanto, o ERP usa dados de faturamento real para uma análise de risco superior à dos bancos."),
    ("Como integrar conta digital no ERP?", "Através de parcerias de BaaS (Banking as a Service) via APIs de instituições financeiras."),
    ("Antecipação de recebíveis é viável para ERPs?", "Sim, é uma das linhas mais rentáveis, utilizando as notas fiscais emitidas como garantia do crédito."),
    ("O que é o ARPU Financeiro?", "A receita média por usuário vinda exclusivamente de transações bancárias e serviços de crédito."),
    ("Qual a vantagem competitiva frente aos bancos?", "O ERP possui o dado contextual (vendas, estoque, impostos) que o banco tradicional não consegue visualizar."),

    # Pilar 4: Produto e Estratégia
    ("Qual a diferença entre ERP Vertical e Horizontal?", "Vertical foca em nichos específicos (ex: oficinas); Horizontal é genérico para administrativo e financeiro."),
    ("Como o PLG funciona em ERP?", "O usuário entra para resolver uma dor (ex: emitir 1 nota) e descobre as outras funções organicamente."),
    ("Qual o maior desafio no onboarding de PMEs?", "A baixa maturidade digital do usuário e a configuração inicial de certificados digitais (A1/A3)."),
    ("Por que a integração com E-commerce é vital?", "PMEs vendem em múltiplos marketplaces; o ERP centraliza estoque e pedidos para evitar ruptura."),
    ("O que é um ERP API-First?", "Um sistema construído para se integrar nativamente a qualquer ferramenta externa via endpoints documentados."),
    ("Como a IA Generativa pode ser usada no ERP?", "Categorização automática de despesas, chatbots de suporte fiscal e análise preditiva de fluxo de caixa."),
    ("O que causa o Churn de Implementação?", "Quando o cliente paga a primeira mensalidade mas não consegue emitir a primeira nota em até 30 dias."),
    ("ERP na nuvem vs. On-premise para PMEs?", "Nuvem (SaaS) é o padrão por custo reduzido, atualização automática e segurança de dados."),
    ("Como lidar com a segurança de dados (LGPD) no ERP?", "Através de criptografia, logs de auditoria e segregação lógica de dados por cliente (multi-tenant)."),
    ("O que é o Dashboard de Fluxo de Caixa ideal?", "Visualização que combina contas a pagar, receber e saldo bancário real com previsibilidade de 30 dias."),
    ("Como reduzir o tempo de implementação (TTV)?", "Uso de wizards de configuração guiada e importação inteligente de arquivos XML de notas anteriores."),
    ("Qual o papel do suporte humano em um SaaS escalável?", "Resolver gargalos fiscais complexos onde a automação ainda exige validação jurídica."),
    ("Por que o controle de estoque gera retenção?", "É o coração da operação; se o sistema controla bem o estoque físico, o cliente dificilmente abandona a solução."),
    ("Como o ERP ajuda na gestão de pessoal?", "Integração com eSocial e folha de pagamento, reduzindo o risco de passivos trabalhistas."),
    ("O que é Multi-empresa em ERP PME?", "Capacidade de gerir vários CNPJs no mesmo ambiente de software, comum em pequenos grupos empresariais."),
    ("Qual o impacto da usabilidade (UX) no churn?", "ERPs complexos geram resistência operacional; uma interface intuitiva reduz o erro humano e o abandono."),
    ("O que é o Product Market Fit para um ERP?", "Quando o software resolve a conformidade fiscal e financeira de forma quase invisível para o empresário."),
    ("Qual a tendência para 2026 no setor?", "Hiper-automação via agentes de IA que realizam o fechamento contábil e conciliação de forma autônoma.")
]

# Nome do arquivo de saída
output_file = "dataset_erp_pme_50.jsonl"

with open(output_file, 'w', encoding='utf-8') as f:
    for question, answer in data:
        # Estrutura exigida pelo Vertex AI Gemini Fine-Tuning
        entry = {
            "messages": [
                {"role": "system", "content": "Você é um especialista em SaaS ERP para PMEs no Brasil. Use benchmarks de 2025-2026."},
                {"role": "user", "content": question},
                {"role": "assistant", "content": answer}
            ]
        }
        f.write(json.dumps(entry, ensure_ascii=False) + '\n')

print(f"Sucesso! Arquivo {output_file} gerado com 50 variações.")